# Project Intelligence for Python Supervisor Process

## Code Style and Standards

- Python code follows PEP 8 with a line length of 88 characters (Black default)
- Use type hints for all function definitions
- Prefer pathlib over os.path for file operations
- Use f-strings for string formatting
- Async functions should be used for I/O-bound operations
- Class names use CapWords convention
- Function and variable names use snake_case
- Constants use UPPER_SNAKE_CASE
- Use docstrings for all public functions, classes, and modules

## Project Structure Conventions

- Core functionality is organized by responsibility (process_manager, file_manager, etc.)
- MCP services are separated from core implementation
- Tests mirror the structure of the implementation
- Configuration is managed through environment variables with sensible defaults

## Git Workflow

- Use descriptive commit messages with a verb-first format (e.g., "Add process monitoring")
- Branch naming convention: feature/*, bugfix/*, refactor/*
- Include tests with all new features
- Keep commits focused on a single responsibility
- Always use an emoji as the start of a commit message.

## Error Handling and Logging

- Log all exceptions with context information
- Use structured logging for machine-parseability
- Define custom exceptions for specific error cases
- Handle errors at the appropriate level, preferring to recover if possible
- Include detailed error responses in MCP service results

## MCP Service Patterns

- Each MCP service follows a consistent pattern:
  - Input validation
  - Core operation execution
  - Error handling
  - Result formatting
- Services include descriptive error messages for client display
- Services should be idempotent when possible
- File paths must be validated against configured boundaries

## Process Management Patterns

- Always capture process output for logging
- Use wrapper scripts for process control where needed
- Handle signals appropriately for clean shutdowns
- Implement timeouts for all external operations

## File Operation Patterns

- Always check file existence before operations
- Validate file paths against allowed directories
- Create backups before modifying critical files
- Use atomic operations for file writing when possible

## Security Considerations

- Validate all user inputs rigorously
- Avoid shell command injection by using proper subprocess APIs
- Limit file operations to specified directories
- Apply principle of least privilege for operations

## Testing Patterns

- Unit tests for all core functionality
- Integration tests for service endpoints
- Mock external dependencies (processes, file system) for unit testing
- Use parameterized tests for edge cases
- Aim for high test coverage, especially in critical paths

## Documentation Patterns

- Update memory bank when implementing significant features
- Include examples for all MCP services
- Document error cases and recovery strategies
- Keep documentation in sync with implementation
